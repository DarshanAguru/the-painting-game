{% extends 'index.html' %} {% load static %}
 {% block styles %}




<style>
    * {
    --col-pri: rgb(51, 27, 27);
    --col-sec: rgb(86, 37, 37);
    --col-chg: rgb(236, 230, 169);
}


.preface-cont {
    display: flex;
    margin: 20px;
    padding: 20px;
    justify-content: center;
    font-size: 32px;

}



@keyframes shake {
    0% {
      transform: translate(0);
    }
    20% {
      transform: translate(3em);
    }
    40% {
      transform: translate(-3em);
    }
    60% {
      transform: translate(3em);
    }
    80% {
      transform: translate(-3em);
    }
    100% {
      transform: translate(0);
    }
  }


.btn-end1 {
    background: white;
    color: var(--col-pri);
    text-decoration: none;
    padding: 6px;
    border: 1px solid var(--col-sec);
    font-size: 22px;
    font-weight: bold;
    border-radius: 8px;
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    -ms-border-radius: 8px;
    -o-border-radius: 8px;
    transition: 0.5s linear;
    -webkit-transition: 0.5s linear;
    -moz-transition: 0.5s linear;
    -ms-transition: 0.5s linear;
    -o-transition: 0.5s linear;
}


.btn-end1:hover {
    background: var(--col-chg);
    box-shadow: 0px 0px 4px 1px rgb(100, 98, 98);
    animation: changeBg 0.5s linear;
    -webkit-animation: changeBg 0.5s linear;
}

.preface-content {
    width: 60%;
    display: flex;
    margin: 20px;
    padding: 20px;
    justify-content: center;
    border: 1px solid black;

    background: rgba(255, 255, 255, 0.7);
    box-shadow: 0px 0px 5px 1px grey;
    border-radius: 8px;
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    -ms-border-radius: 8px;
    -o-border-radius: 8px;
    transition: 1s ease-in-out;

}

.preface-content:hover {
    transition: 1s ease-in-out;
    box-shadow: 0px 0px 12px 2px black;
    -webkit-transition: 1s ease-in-out;
    -moz-transition: 1s ease-in-out;
    -ms-transition: 1s ease-in-out;
    -o-transition: 1s ease-in-out;
}

.alignitems {
    display: flex;
    /* align-items: center; */
    justify-content: center;
}


form {
    margin: 10px;
    padding: 10px;
    display: flex;
    justify-content: center;
}

.ans-bar {
    margin: 10px;
    width: 40%;
}

.ans-bar>input {
    font-size: 22px;
    border-radius: 8px;
    border: 1px solid var(--col-pri);
    color: var(--col-pri);
    height: 40px;
    width: 100%;
    padding: 2px;
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    -ms-border-radius: 8px;
    -o-border-radius: 8px;
}

.btn-end {
    margin: 10px;
    font-size: 22px;
    height: 44px;
    width: 10%;
}

.btn-top {
    border-radius: 8px;
    font-size: 16px;
    padding: 2px;
    color: var(--col-pri);
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    -ms-border-radius: 8px;
    -o-border-radius: 8px;
    border: 1px solid black;
    background: var(--col-chg);
    transition: 0.2s ease-in;
    -webkit-transition: 0.2s ease-in;
    -moz-transition: 0.2s ease-in;
    -ms-transition: 0.2s ease-in;
    -o-transition: 0.2s ease-in;
}

.btn-top:hover {
    transition: 0.2s ease-in;
    box-shadow: 0px 0px 4px 1px black;
    padding: 4px;
    -webkit-transition: 0.2s ease-in;
    -moz-transition: 0.2s ease-in;
    -ms-transition: 0.2s ease-in;
    -o-transition: 0.2s ease-in;
}


.ts {
    display: flex;
    position: fixed;
    top: 2%;
    left: 80%;
    border-radius: 10px;
    border: 1px solid black;
    color: rgb(51, 27, 27);
    font-size: 18px;
    background: white;
    padding: 12px;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    -ms-border-radius: 10px;
    -o-border-radius: 10px;
}

.ts>span {
    /* margin: 5px; */
    margin-left: 8px;
    font-size: 18px;
    color: var(--col-pri);
    font-weight: bold;
}

.cnt {
    margin-left: 2px;
}
    .shake{
    background: rgb(255, 215, 215);
    /* border: 2px solid red; */
    animation: shake 0.5s ease-in-out;
    -webkit-animation: shake 0.5s;
}
</style>
{% if hurray %}
    <style>
       .crtone{
        z-index: 999;
    position: fixed;
    left: 10%;
    top: 10%;
    display: flex;
    justify-content: center;
    border-radius: 8px;
    border: 1px solid green;
    box-shadow: 0px 0px 10px 1px black;
    background: rgba(255, 255, 255,0.9);
    width: 1200px;
    height: 400px;
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    -ms-border-radius: 8px;
    -o-border-radius: 8px;
}

.co
{
    position: inherit;
    margin: 250px;
    padding: 8px;
    border-radius: 8px;
    font-size: 18px;
    background : rgb(252, 237, 219);
    color: rgb(55, 37, 14);
    font-weight: bold;
    transition: 0.5s ease-in;



}

.co:hover{
    cursor: pointer;
    box-shadow: 0px 0px 5px 1px black;
    transition: 0.5s ease-out;
}

.typewriter
{
    position: inherit;
    margin: 100px;
    box-shadow: 0px 0px 10px 2px black;
    padding: 20px;
    border-radius: 8px;
    width: 600px;
    display: flex;
    
    justify-content: center;
    background-color: rgb(252, 237, 219);
}


@media (min-width: 200px) and (max-width: 425px) {
    .crtone{
        top: 2%;
        left: 4%;
        width: 300px;
        height: 400px;
    }
    .typewriter{
        width: 240px;
    }
    .co{
        margin: 290px;
    }
}

@media (min-width: 425px) and (max-width:800px) {
    .crtone{
        top: 10%;
        left: 10%;
        width: 600px;
        height: 400px;
    }
    .typewriter{
        width: 400px;
    }
    .co{
        margin: 290px;
    }
}

@media (min-width: 800px) and (max-width:1100px) {
    .crtone{
        top: 10%;
        left: 10%;
        width: 850px;
        height: 400px;
    }
    .typewriter{
        width: 600px;
    }
    .co{
        margin: 240px;
    }
}
    </style>
{% endif %}
{% endblock %} 

{% block game %}

{% if hurray %}
    <div class="crtone">
        <h1 style=" font-size: 40px;color:green"> Correct</h1>
        
        <div class="typewriter">
            Hurray! you got it, It's correct. The door opened and we got into another passage. I guess we are getting closer to the painting.
            {% if hint %}
             I really forgot to tell you that the painting has a golden frame that the king has specially ordered for that painting. It shows his love towards the painting.
            {% endif %}
            The next question is waiting for you, click on continue to answer.
        </div>
        <button class="co" type="button" id="cnt">Continue</button>
    </div>
{% endif %}

<div class="ts"> 
    <button class="btn-top" id ="rst">Restart</button>
    <span> Time: </span><div class="cnt" id="time"></div>
    <span> Score: </span><div class="cnt" id="score"></div>
</div>


<div class="cardmain">
        
        
    <h1 class="heading-1" align="center">The Painting</h1>
    <div class="alignitems">
    <div class="preface-content" oncopy="return false" oncut="return false" onpaste="return false">
      <!-- <div id="typewriter"> -->
    
 
        <!-- <i>"It am made of bones but It's not alive,
            It supports your body but It cannot strive,
            It has no muscle or flesh, it's just a calcium drive,
            What is It?" -->
        <!-- </i> -->
    <i>
        {{clue}}
    </i>
    
        
      <!-- </div> -->
    </div>
</div>



<form method="post">
    {% csrf_token %}
 
    <div class="ans-bar">
        <input type="text" class="bar" name="clueans" placeholder="Please write your answer here..." required>
    </div>
    <input class="btn-end" type="submit" name="submit" value="check"> 
    <!-- <button class="btn-end" onclick="{restart()}" >restart</button> -->
</form>

{% if error%}
<center>
<h3 style="margin:2px;color:red">Incorrect Answer</h3>
</center>
{% endif %}
<!-- <button type ="button" onclick="destvar()">dest</button> -->
    <!-- <div class="continue">
        <a class="btn-end" href="{ url 'gamest' '1' }">Let'z Start</a>
    </div> -->


  </div>


</div>



{% endblock %}

{% block script %}


<script>

//   b.classList.add("shake"); 

function destvar()
    {
        // var st = 'stime' + "{{tid}}";
        sessionStorage.clear();
    }
    var r = document.getElementById('rst');
    r.addEventListener("click", (event)=>
    {
        destvar();
        var url  = "{% url 'restart' %}";
        document.location.href = url;
    })
    

    window.onload =
        function(){
            var st = 'stime' + "{{tid}}";
            if(sessionStorage.length > 1)
            {
                destvar();
            }
            if(sessionStorage.getItem(st) == null)
            {
                sessionStorage.setItem(st,(Date.now()).toString());
            }
            
        }
    

window.setInterval((function(){

    var st = 'stime' + "{{tid}}";

    var start = (sessionStorage.getItem(st) == null)? Date.now() : Number(sessionStorage.getItem(st));

   var d = document.getElementById('time');
   var s = document.getElementById('score');
   s.innerHTML = '{{score}}';
   d.innerHTML = '0:00'; //.appendChild(textNode);
   return function() {
        //textNode.data 
        res = Math.floor((Date.now()-start)/1000);// + 's';
        

        if(res >= 60)
        {
            var sc = Math.floor(res/60);
            var sc1 = Math.floor(res/60)+1;

            var soc = Math.ceil(Number("{{score}}")/sc1);
        
            s.innerHTML = (soc >=5)?soc:5;
            
            
            res = sc + ":" + (res%60).toString().padStart(2,'0');
        }
        else{
            res = "0:"+ res.toString().padStart(2,'0');
        }
        
        
        d.innerHTML = res;
        };
   }()), 1000);
    

</script>


{% if error %}
<script type="text/javascript">
    document.getElementsByClassName('bar')[0].classList.add('shake');
</script>
{% else %}
<script type="text/javascript">
    if(document.getElementsByClassName('bar')[0].classList.contains('shake')){
    document.getElementsByClassName('bar')[0].classList.remove('shake');
    }
</script>
{% endif %}


{% if hurray %}
<script>
    var c = document.getElementById('cnt')
    c.addEventListener('click', function(){
        document.getElementsByClassName('crtone')[0].style.display="none";
    });
    
</script>


{% endif %}


{% endblock %}




{% block usercheck%}
{% endblock %}
